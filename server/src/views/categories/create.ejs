<div class="card">
    <div class="card-body">
        <form method="POST" action="/category/create">
            <div class="row">
                <div class="col-lg-5">
                    <div class="card">
                        <div class="card-body">
                            <div class="form-group">
                                <label>Category Name</label>
                                <input type="text" class="form-control <%= formErrors.name ? 'is-invalid' :'' %>"
                                    name="name" value="<%= formData.name %>" placeholder="Enter Category Name">
                                <% if(formErrors.name){ %>
                                <div class="invalid-feedback">
                                    <%- formErrors.name.msg %>
                                </div>
                                <% } %>
                            </div>
                            <div class="form-group">
                                <label>Description</label>
                                <textarea name="description"
                                    class="form-control <%= formErrors.description ? 'is-invalid' :'' %>"
                                    rows="4"><%= formData.description %></textarea>
                                <% if(formErrors.description){ %>
                                <div class="invalid-feedback">
                                    <%- formErrors.description.msg %>
                                </div>
                                <% } %>
                            </div>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-7">
                    <div class="card">
                        <div class="card-body" id="apndSubCat">
                            <% if(typeof formData.subcategory !== 'undefined' && formData.subcategory.length > 0){ %>
                            <%
                                        const lt = formData.subcategory.length;
                                        let i =0;
                                             formData.subcategory.forEach(model => {
                                                let errSubCatname = `subcategory[${i}].subCatname`;
                                                    errSubCatnameDb = `subcategories.${i}.subCatname`;
                                                  %>
                            <div class="row" id="subcat-<%- i  %>">
                                <div class="col-lg-10">
                                    <div class="form-group">
                                        <label>Sub Category Name</label>
                                        <input type="text"
                                            class="form-control <%= formErrors[errSubCatname] || formErrors[errSubCatnameDb] ? 'is-invalid' :'' %>"
                                            name="subcategory[<%- i %>][subCatname]" value="<%= model.subCatname %>"
                                            placeholder="Enter Category Name">
                                        <% if(formErrors[errSubCatname] || formErrors[errSubCatnameDb]){ %>
                                        <div class="invalid-feedback">
                                            <%- formErrors[errSubCatname].msg %>
                                            <%- formErrors[errSubCatnameDb] %>
                                        </div>
                                        <% } %>
                                    </div>
                                    <div class="form-group">
                                        <label>Description</label>
                                        <textarea name="subcategory[<%- i %>][subCatdescription]" class="form-control"
                                            rows="2"><%= model.subCatdescription %></textarea>
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <br />
                                    <% if(i == 0){%>
                                    <button id="addsubcat" data-id="<%- lt %>" class="btn btn-xs btn-primary">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                    <% }else{ %>
                                    <button href="#" data-id="<%- i %>" class="btn btn-xs btn-danger remove-sub">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <% } %>
                                </div>
                            </div>
                            <% i++ }) %>
                            <% }else{ %>
                            <div class="row">
                                <div class="col-lg-10">
                                    <div class="form-group">
                                        <label>Sub Category Name</label>
                                        <input type="text" class="form-control" name="subcategory[1][subCatname]"
                                            placeholder="Enter Category Name">
                                    </div>
                                    <div class="form-group">
                                        <label>Description</label>
                                        <textarea name="subcategory[1][subCatdescription]" class="form-control"
                                            rows="2"></textarea>
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <br />
                                    <button id="addsubcat" data-id="1" class="btn btn-xs btn-primary">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>